<!-- Notebooks ç½‘æ ¼ -->
<div class="mt-8 space-y-8 w-full" id="notebooks-grid">
  {{ range where .Site.RegularPages "Section" "notebooks" }}
    {{ if ne .File.TranslationBaseName "_index" }}
      <div class="notebook-card group">
        <article class="relative overflow-hidden rounded-2xl border border-neutral-200 bg-white shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-[1.02] dark:border-neutral-700 dark:bg-neutral-600 w-full">
          <div class="flex flex-col">
            <!-- ä¸Šæ–¹ï¼šæ–‡å­—ä¿¡æ¯ - ç‚¹å‡»æ­£å¸¸è·³è½¬ -->
            <div class="flex-1 p-6 lg:p-8 flex flex-col justify-center cursor-pointer" onclick="window.location.href='{{ .Permalink }}'">
              <header class="mb-4">
                <h3 class="text-2xl lg:text-3xl font-bold text-neutral-900 dark:text-neutral mb-3 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors leading-tight">
                  {{ .Title }}
                </h3>
                <p class="text-base lg:text-lg text-neutral-600 dark:text-neutral-400 leading-relaxed">
                  {{ .Description }}
                </p>
              </header>
            </div>

            <!-- ä¸‹æ–¹ï¼šJupyter Notebook é¢„è§ˆ - ç‚¹å‡»æ–°æ ‡ç­¾é¡µæ‰“å¼€ -->
            <div class="w-full bg-white dark:bg-neutral-800 overflow-hidden p-6 lg:p-8 cursor-pointer iframe-click-area" onclick="handleIframeClick(event, '{{ .Params.modelscope }}', '{{ .Permalink }}')" data-modelscope="{{ .Params.modelscope }}" data-permalink="{{ .Permalink }}">
              {{ if .Params.modelscope }}
                <iframe 
                  src="{{ .Params.modelscope }}"
                  width="100%"
                  height="100%"
                  frameborder="0"
                  style="border: none; border-radius: 8px;"
                  allowfullscreen>
                </iframe>
              {{ else }}
                <div class="h-full bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 flex items-center justify-center rounded-lg">
                  <div class="text-center">
                    <div class="text-5xl mb-4">ğŸ“Š</div>
                    <div class="text-xl font-semibold text-neutral-700 dark:text-neutral-300 mb-3">{{ .Title }}</div>
                    <div class="text-base text-neutral-500 dark:text-neutral-400">è¯·åœ¨ front matter ä¸­è®¾ç½® modelscope å‚æ•°</div>
                  </div>
                </div>
              {{ end }}
            </div>
          </div>
        </article>
      </div>
    {{ end }}
  {{ end }}
</div>

<style>
/* å¡ç‰‡æ‚¬åœæ•ˆæœ */
.notebook-card article {
  transform: translateY(0);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.notebook-card article:hover {
  transform: translateY(-4px);
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 1024px) {
  .notebook-card article {
    height: 600px !important;
    min-height: 600px;
  }
  
  .notebook-card article .flex.flex-col {
    height: 600px !important;
  }
  
  .notebook-card article .flex.flex-col > div:last-child {
    height: 450px !important;
  }
}
</style>

<script>
function handleIframeClick(event, modelscope, permalink) {
  // é˜»æ­¢äº‹ä»¶å†’æ³¡
  event.stopPropagation();
  
  // å¦‚æœæœ‰modelscopeé“¾æ¥ï¼Œåœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€
  if (modelscope && modelscope.trim() !== '') {
    window.open(modelscope, '_blank');
  } else {
    // å¦‚æœæ²¡æœ‰modelscopeé“¾æ¥ï¼Œåœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€æ–‡ç« é¡µé¢
    window.open(permalink, '_blank');
  }
}

// ä¸ºiframeæ·»åŠ æ ·å¼ï¼Œç¡®ä¿é¼ æ ‡æ»šåŠ¨æ—¶ä¸ä¼šè§¦å‘ç‚¹å‡»
document.addEventListener('DOMContentLoaded', function() {
  const iframes = document.querySelectorAll('.iframe-click-area iframe');
  iframes.forEach(function(iframe) {
    // ç¦ç”¨iframeçš„æŒ‡é’ˆäº‹ä»¶ï¼Œè®©çˆ¶å®¹å™¨å¤„ç†ç‚¹å‡»
    iframe.style.pointerEvents = 'none';
    
    // é¼ æ ‡è¿›å…¥iframeåŒºåŸŸæ—¶ï¼Œä¸´æ—¶å¯ç”¨æŒ‡é’ˆäº‹ä»¶ä»¥æ”¯æŒæ»šåŠ¨
    iframe.parentElement.addEventListener('mouseenter', function() {
      iframe.style.pointerEvents = 'auto';
    });
    
    // é¼ æ ‡ç¦»å¼€iframeåŒºåŸŸæ—¶ï¼Œé‡æ–°ç¦ç”¨æŒ‡é’ˆäº‹ä»¶
    iframe.parentElement.addEventListener('mouseleave', function() {
      iframe.style.pointerEvents = 'none';
    });
  });
});
</script>
