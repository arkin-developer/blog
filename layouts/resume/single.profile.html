{{ define "head" }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ProfilePage",
    "mainEntity": {
      "@type": "Person",
      "name": {{ .Site.Params.author.name | default .Site.Title | jsonify }},
      "url": {{ .Permalink | jsonify }}
    },
    "headline": {{ .Title | jsonify }},
    "description": {{ with .Params.description }}{{ . | jsonify }}{{ else }}{{ .Summary | plainify | jsonify }}{{ end }}
  }
  </script>
  <style>
    /* å“åº”å¼å¸ƒå±€ - ä½¿ç”¨æ˜¾ç¤º/éšè—æ§åˆ¶ */
    @media (min-width: 768px) {
      article .resume-header-container-pc {
        display: flex !important;
      }
      article .resume-header-container-mobile {
        display: none !important;
      }
    }
    
    @media (max-width: 767px) {
      article .resume-header-container-pc {
        display: none !important;
      }
      article .resume-header-container-mobile {
        display: flex !important;
      }
    }
  </style>
{{ end }}

{{ define "main" }}
  <article>
    <header>
      <h1 class="mb-6 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        {{ if .Params.download }}
          <a href="{{ .Params.download }}" target="_blank" rel="noopener noreferrer" 
             style="text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; transition: color 0.2s;"
             class="text-neutral-900 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400">
            {{ .Title | emojify }}
            <svg style="width: 1.5rem; height: 1.5rem; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </a>
        {{ else }}
          {{ .Title | emojify }}
        {{ end }}
      </h1>
      {{ with .Params.description }}
        <p class="mb-6 text-base text-neutral-500 dark:text-neutral-400">{{ . }}</p>
      {{ end }}
      
      <!-- PCç«¯å¸ƒå±€ -->
      <div class="resume-header-container-pc" style="display: flex !important; align-items: flex-start !important; gap: 1.5rem !important; margin-bottom: 1.5rem !important; flex-direction: row !important;">
        {{ with .Params.avatar }}
          <img src="{{ . }}" alt="avatar" class="rounded-md object-cover border border-neutral-300 shadow-sm dark:border-neutral-600" style="height: 12rem !important; width: 9rem !important; max-width: 100%; flex-shrink: 0 !important; display: block !important;" />
        {{ end }}
        <div style="flex: 1 !important; min-width: 0 !important; display: block !important;">
          <h2 style="margin: 0 0 1rem 0 !important; font-size: 1.5rem !important; font-weight: 600 !important; color: inherit !important;">ğŸ‘¤ {{ if eq .Language.Lang "en" }}Basic Information{{ else }}åŸºæœ¬ä¿¡æ¯{{ end }}</h2>
          <ul style="margin: 0 !important; padding-left: 1.5rem !important; list-style-type: disc !important;">
            {{ $isEnglish := eq .Language.Lang "en" }}
            {{ with .Params.basic_info }}
              <li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Name{{ else }}å§“å{{ end }}</strong>ï¼š{{ .name }}</li>
              {{ if .position }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Target Position{{ else }}æ„å‘å²—ä½{{ end }}</strong>ï¼š{{ .position }}</li>{{ end }}
              {{ if .target_position }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Target Position{{ else }}æ„å‘å²—ä½{{ end }}</strong>ï¼š{{ .target_position }}</li>{{ end }}
              <li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Email{{ else }}é‚®ç®±{{ end }}</strong>ï¼š{{ .email }}</li>
              {{ if .github }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">GitHub</strong>ï¼š<a href="{{ .github }}" target="_blank" rel="noopener noreferrer" style="color: #3b82f6; text-decoration: underline;">{{ .github }}</a></li>{{ end }}
              {{ if .wechat }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">å¾®ä¿¡</strong>ï¼š{{ .wechat }}</li>{{ end }}
              {{ if .phone }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Phone{{ else }}ç”µè¯{{ end }}</strong>ï¼š{{ .phone }}</li>{{ end }}
            {{ end }}
          </ul>
        </div>
      </div>
      
      <!-- ç§»åŠ¨ç«¯å¸ƒå±€ -->
      <div class="resume-header-container-mobile" style="display: flex !important; align-items: center !important; gap: 1.5rem !important; margin-bottom: 1.5rem !important; flex-direction: column !important;">
        {{ with .Params.avatar }}
          <img src="{{ . }}" alt="avatar" class="rounded-md object-cover border border-neutral-300 shadow-sm dark:border-neutral-600" style="height: 12.5rem !important; width: 9.375rem !important; max-width: 100%; flex-shrink: 0 !important; display: block !important;" />
        {{ end }}
        <div style="flex: 1 !important; min-width: 0 !important; display: block !important; width: 100% !important;">
          <h2 style="margin: 0 0 1rem 0 !important; font-size: 1.5rem !important; font-weight: 600 !important; color: inherit !important; text-align: center !important;">ğŸ‘¤ {{ if eq .Language.Lang "en" }}Basic Information{{ else }}åŸºæœ¬ä¿¡æ¯{{ end }}</h2>
          <ul style="margin: 0 !important; padding-left: 1.5rem !important; list-style-type: disc !important; text-align: left !important;">
            {{ $isEnglish := eq .Language.Lang "en" }}
            {{ with .Params.basic_info }}
              <li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Name{{ else }}å§“å{{ end }}</strong>ï¼š{{ .name }}</li>
              {{ if .position }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Target Position{{ else }}æ„å‘å²—ä½{{ end }}</strong>ï¼š{{ .position }}</li>{{ end }}
              {{ if .target_position }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Target Position{{ else }}æ„å‘å²—ä½{{ end }}</strong>ï¼š{{ .target_position }}</li>{{ end }}
              <li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Email{{ else }}é‚®ç®±{{ end }}</strong>ï¼š{{ .email }}</li>
              {{ if .github }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">GitHub</strong>ï¼š<a href="{{ .github }}" target="_blank" rel="noopener noreferrer" style="color: #3b82f6; text-decoration: underline;">{{ .github }}</a></li>{{ end }}
              {{ if .wechat }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">å¾®ä¿¡</strong>ï¼š{{ .wechat }}</li>{{ end }}
              {{ if .phone }}<li style="margin-bottom: 0.5rem !important; color: inherit !important;"><strong style="font-weight: 600 !important;">{{ if $isEnglish }}Phone{{ else }}ç”µè¯{{ end }}</strong>ï¼š{{ .phone }}</li>{{ end }}
            {{ end }}
          </ul>
        </div>
      </div>
    </header>

    <section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row">
      {{ if in .TableOfContents "<ul" }}
        <div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8">
          <div class="toc pe-5 lg:sticky lg:top-10 print:hidden">
            {{ partial "toc.html" . }}
          </div>
        </div>
      {{ end }}
      <div class="min-h-0 min-w-0 max-w-prose grow">
        {{ .Content | emojify }}
      </div>
    </section>
  </article>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // å“åº”å¼å¸ƒå±€æ§åˆ¶
      function updateLayout() {
        const pcContainer = document.querySelector('.resume-header-container-pc');
        const mobileContainer = document.querySelector('.resume-header-container-mobile');
        
        if (window.innerWidth >= 768) {
          // PCç«¯ï¼šæ˜¾ç¤ºPCå¸ƒå±€ï¼Œéšè—ç§»åŠ¨ç«¯å¸ƒå±€
          if (pcContainer) pcContainer.style.display = 'flex';
          if (mobileContainer) mobileContainer.style.display = 'none';
        } else {
          // ç§»åŠ¨ç«¯ï¼šæ˜¾ç¤ºç§»åŠ¨ç«¯å¸ƒå±€ï¼Œéšè—PCå¸ƒå±€
          if (pcContainer) pcContainer.style.display = 'none';
          if (mobileContainer) mobileContainer.style.display = 'flex';
        }
      }
      
      // åˆå§‹è®¾ç½®
      updateLayout();
      
      // ç›‘å¬çª—å£å¤§å°å˜åŒ–
      window.addEventListener('resize', updateLayout);
      
      // éšè—Markdownæ¸²æŸ“çš„åŸºæœ¬ä¿¡æ¯éƒ¨åˆ†ï¼ˆåœ¨proseå®¹å™¨å†…çš„ï¼‰
      const proseContainer = document.querySelector('.prose');
      if (proseContainer) {
        const basicInfoH2 = proseContainer.querySelector('h2');
        if (basicInfoH2 && (basicInfoH2.textContent.includes('åŸºæœ¬ä¿¡æ¯') || basicInfoH2.textContent.includes('Basic Information'))) {
          let nextElement = basicInfoH2.nextElementSibling;
          while (nextElement && nextElement.tagName !== 'H2') {
            nextElement.style.display = 'none';
            nextElement = nextElement.nextElementSibling;
          }
          basicInfoH2.style.display = 'none';
        }
      }
    });
  </script>
{{ end }}